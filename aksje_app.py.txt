import streamlit as st
import yfinance as yf
import pandas as pd

# Konfigurer siden
st.set_page_config(page_title="Aksje Terminal", layout="wide")
st.title("ðŸš€ Min Aksjeplattform")

# Sidepanel for valg av aksjer
st.sidebar.header("Innstillinger")
valgt_aksje = st.sidebar.text_input("Ticker 1 (f.eks. MOWI.OL):", "MOWI.OL")
sammenlign_med = st.sidebar.text_input("Ticker 2 (f.eks. SALM.OL):", "SALM.OL")

col1, col2 = st.columns(2)

def hent_data(symbol):
    data = yf.Ticker(symbol)
    hist = data.history(period="1y")
    info = data.info
    return hist, info

# Hent data
try:
    hist1, info1 = hent_data(valgt_aksje)
    hist2, info2 = hent_data(sammenlign_med)

    with col1:
        st.subheader(f"{info1.get('longName', valgt_aksje)}")
        st.line_chart(hist1['Close'])
        st.write(f"**Gjeldende Pris:** {info1.get('currentPrice')} {info1.get('currency')}")

    with col2:
        st.subheader("Sammenligning")
        sammenligning_df = pd.DataFrame({
            "NÃ¸kkeltall": ["Pris", "P/E Ratio", "Utbytte %"],
            info1.get('symbol'): [info1.get('currentPrice'), info1.get('forwardPE'), info1.get('dividendYield', 0)*100],
            info2.get('symbol'): [info2.get('currentPrice'), info2.get('forwardPE'), info2.get('dividendYield', 0)*100]
        })
        st.table(sammenligning_df)
except:
    st.error("Kunne ikke hente data. Sjekk at ticker-navnet er riktig (f.eks. EQNR.OL)")